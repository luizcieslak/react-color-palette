"use client"
import g,{memo as ee}from"react";function v(n,e){return Array.isArray(n)?n.includes(e):n}import H,{memo as G,useCallback as U,useMemo as M}from"react";import{useCallback as R,useLayoutEffect as z,useMemo as _,useRef as O,useState as W}from"react";function f(){let n=O(null),[e,o]=W(0),r=R(()=>o(s=>s+1),[]);z(()=>{window.addEventListener("resize",r,!1);let s=new ResizeObserver(r);return n.current&&s.observe(n.current),()=>{window.removeEventListener("resize",r,!1),s.disconnect()}},[r]);let i=_(()=>{let{width:s=1,height:a=1}=n.current?.getBoundingClientRect()??{};return{width:s,height:a}},[e]),t=R(()=>{let{left:s=1,right:a=1,top:c=1,bottom:u=1}=n.current?.getBoundingClientRect()??{};return{left:s,right:a,top:c,bottom:u}},[]);return[n,i,t]}function C(n,e,o){return n<e?e:n>o?o:n}var I=class{convert(e,o){let r=this.toHex("#000000"),i=this.hex2rgb(r),t=this.rgb2hsv(i);if(e==="hex"){let s=o;r=this.toHex(s),i=this.hex2rgb(r),r.startsWith("rgba")&&(i=this.toRgb(r),r=this.rgb2hex(i)),t=this.rgb2hsv(i)}else e==="rgb"?(i=o,r=this.rgb2hex(i),t=this.rgb2hsv(i)):e==="hsv"&&(t=o,i=this.hsv2rgb(t),r=this.rgb2hex(i));return{hex:r,rgb:i,hsv:t}}toHex(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((o,r)=>r?r<4?o+o:o==="f"?void 0:o+o:"#").join(""),e;if(e.length===7)return e;if(e.length===9)return e.endsWith("ff")?e.slice(0,7):e}else{let o=document.createElement("canvas").getContext("2d");if(!o)throw new Error("2d context not supported or canvas already initialized");return o.fillStyle=e,o.fillStyle}return"#000000"}toRgb(e){let o=e.match(/\d+(\.\d+)?/gu)??[],[r,i,t,s]=Array.from({length:4}).map((a,c)=>C(+(o[c]??(c<3?0:1)),0,c<3?255:1));return{r,g:i,b:t,a:s}}toHsv(e){let o=e.match(/\d+(\.\d+)?/gu)??[],[r,i,t,s]=Array.from({length:4}).map((a,c)=>C(+(o[c]??(c<3?0:1)),0,c?c<3?100:1:360));return{h:r,s:i,v:t,a:s}}hex2rgb(e){e=e.slice(1);let[o,r,i,t]=Array.from({length:4}).map((s,a)=>parseInt(e.slice(a*2,a*2+2),16));return t=Number.isNaN(t)?1:t/255,{r:o,g:r,b:i,a:t}}rgb2hsv({r:e,g:o,b:r,a:i}){e/=255,o/=255,r/=255;let t=Math.max(e,o,r),s=t-Math.min(e,o,r),a=s?(t===e?(o-r)/s+(o<r?6:0):t===o?2+(r-e)/s:4+(e-o)/s)*60:0,c=t?s/t*100:0,u=t*100;return{h:a,s:c,v:u,a:i}}hsv2rgb({h:e,s:o,v:r,a:i}){o/=100,r/=100;let t=~~(e/60),s=e/60-t,a=r*(1-o),c=r*(1-o*s),u=r*(1-o*(1-s)),l=t%6,p=[r,c,a,a,u,r][l]*255,d=[u,r,r,c,a,a][l]*255,h=[a,a,u,r,r,c][l]*255;return{r:p,g:d,b:h,a:i}}rgb2hex({r:e,g:o,b:r,a:i}){let[t,s,a,c]=[e,o,r,i].map((u,l)=>Math.round(l<3?u:u*255).toString(16).padStart(2,"0"));return["#",t,s,a,c==="ff"?void 0:c].join("")}},m=new I;import X,{memo as q,useCallback as D}from"react";var y=q(({onCoordinateChange:n,children:e,disabled:o})=>{let[r,{width:i,height:t},s]=f(),a=D((u,l=!1)=>{let{left:p,top:d}=s(),h=C(u.clientX-p,0,i),x=C(u.clientY-d,0,t);n(h,x,l)},[i,t,s,n]),c=D(u=>{if(u.button!==0)return;a(u);let l=d=>{a(d)},p=d=>{a(d,!0),document.removeEventListener("pointermove",l,!1),document.removeEventListener("pointerup",p,!1)};document.addEventListener("pointermove",l,!1),document.addEventListener("pointerup",p,!1)},[a]);return X.createElement("div",{ref:r,className:"rcp-interactive",style:{cursor:o?"not-allowed":"move"},onPointerDown:o?void 0:c},e)});var E=G(({color:n,onChange:e,onChangeComplete:o,disabled:r})=>{let[i,{width:t}]=f(),s=M(()=>({x:n.hsv.a*t}),[n.hsv.a,t]),a=U((l,p,d)=>{let h=m.convert("hsv",{...n.hsv,a:l/t});e(h),d&&o?.(h)},[n.hsv,t,e,o]),c=M(()=>[n.rgb.r,n.rgb.g,n.rgb.b].join(" "),[n.rgb.r,n.rgb.g,n.rgb.b]),u=M(()=>[c,n.rgb.a].join(" / "),[c,n.rgb.a]);return H.createElement(y,{onCoordinateChange:a,disabled:r},H.createElement("div",{ref:i,style:{background:`linear-gradient(to right, rgb(${c} / 0), rgb(${c} / 1)) top left / auto auto,
                      conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) top left / 12px 12px
                      repeat`},className:"rcp-alpha"},H.createElement("div",{style:{left:s.x,background:`linear-gradient(to right, rgb(${u}), rgb(${u})) top left / auto auto,
                        conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) ${-s.x-4}px 2px / 12px 12px
                        repeat`},className:"rcp-alpha-cursor"})))});import b,{memo as V,useCallback as S,useEffect as T,useState as Y}from"react";function P(n,e){return Math.round(n*10**e)/10**e}function N({r:n,g:e,b:o,a:r}){let i=[Math.round(n),Math.round(e),Math.round(o)],t=P(r,3);return t<1&&i.push(t),i.join(", ")}function k({h:n,s:e,v:o,a:r}){let i=[`${Math.round(n)}\xB0`,`${Math.round(e)}%`,`${Math.round(o)}%`],t=P(r,3);return t<1&&i.push(t),i.join(", ")}var $=V(({hideInput:n,color:e,onChange:o,onChangeComplete:r,disabled:i})=>{let[t,s]=Y({hex:{value:e.hex,inputted:!1},rgb:{value:N(e.rgb),inputted:!1},hsv:{value:k(e.hsv),inputted:!1}});T(()=>{t.hex.inputted||s(l=>({...l,hex:{...l.hex,value:e.hex}}))},[t.hex.inputted,e.hex]),T(()=>{t.rgb.inputted||s(l=>({...l,rgb:{...l.rgb,value:N(e.rgb)}}))},[t.rgb.inputted,e.rgb]),T(()=>{t.hsv.inputted||s(l=>({...l,hsv:{...l.hsv,value:k(e.hsv)}}))},[t.hsv.inputted,e.hsv]);let a=S(l=>p=>{let{value:d}=p.target;s(h=>({...h,[l]:{...h[l],value:d}})),o(l==="hsv"?m.convert("hsv",m.toHsv(d)):l==="rgb"?m.convert("rgb",m.toRgb(d)):m.convert("hex",d))},[o]),c=S(l=>()=>{s(p=>({...p,[l]:{...p[l],inputted:!0}}))},[]),u=S(l=>p=>{let{value:d}=p.target;s(h=>({...h,[l]:{...h[l],inputted:!1}})),r?.(l==="hsv"?m.convert("hsv",m.toHsv(d)):l==="rgb"?m.convert("rgb",m.toRgb(d)):m.convert("hex",d))},[r]);return b.createElement("div",{className:"rcp-fields"},!v(n,"hex")&&b.createElement("div",{className:"rcp-fields-floor"},b.createElement("div",{className:"rcp-field"},b.createElement("input",{id:"hex",className:"rcp-field-input",value:t.hex.value,disabled:i,onChange:a("hex"),onFocus:c("hex"),onBlur:u("hex")}),b.createElement("label",{htmlFor:"hex",className:"rcp-field-label"},"HEX"))),(!v(n,"rgb")||!v(n,"hsv"))&&b.createElement("div",{className:"rcp-fields-floor"},!v(n,"rgb")&&b.createElement("div",{className:"rcp-field"},b.createElement("input",{id:"rgb",className:"rcp-field-input",value:t.rgb.value,disabled:i,onChange:a("rgb"),onFocus:c("rgb"),onBlur:u("rgb")}),b.createElement("label",{htmlFor:"rgb",className:"rcp-field-label"},"RGB")),!v(n,"hsv")&&b.createElement("div",{className:"rcp-field"},b.createElement("input",{id:"hsv",className:"rcp-field-input",value:t.hsv.value,disabled:i,onChange:a("hsv"),onFocus:c("hsv"),onBlur:u("hsv")}),b.createElement("label",{htmlFor:"hsv",className:"rcp-field-label"},"HSV"))))});import w,{memo as J,useCallback as K,useMemo as j}from"react";var L=J(({color:n,onChange:e,onChangeComplete:o,disabled:r})=>{let[i,{width:t}]=f(),s=j(()=>({x:n.hsv.h/360*t}),[n.hsv.h,t]),a=K((u,l,p)=>{let d=m.convert("hsv",{...n.hsv,h:u/t*360});e(d),p&&o?.(d)},[n.hsv,t,e,o]),c=j(()=>[n.hsv.h,"100%","50%"].join(" "),[n.hsv.h]);return w.createElement(y,{onCoordinateChange:a,disabled:r},w.createElement("div",{ref:i,className:"rcp-hue"},w.createElement("div",{style:{left:s.x,backgroundColor:`hsl(${c})`},className:"rcp-hue-cursor"})))});import F,{memo as Q,useCallback as Z,useMemo as A}from"react";var B=Q(({height:n,color:e,onChange:o,onChangeComplete:r,disabled:i})=>{let[t,{width:s}]=f(),a=A(()=>{let p=e.hsv.s/100*s,d=(100-e.hsv.v)/100*n;return{x:p,y:d}},[e.hsv.s,e.hsv.v,s,n]),c=Z((p,d,h)=>{let x=m.convert("hsv",{...e.hsv,s:p/s*100,v:100-d/n*100});o(x),h&&r?.(x)},[e.hsv,s,n,o,r]),u=A(()=>[e.hsv.h,"100%","50%"].join(" "),[e.hsv.h]),l=A(()=>[e.rgb.r,e.rgb.g,e.rgb.b].join(" "),[e.rgb.r,e.rgb.g,e.rgb.b]);return F.createElement(y,{onCoordinateChange:c,disabled:i},F.createElement("div",{ref:t,style:{height:n,backgroundColor:`hsl(${u})`},className:"rcp-saturation"},F.createElement("div",{style:{left:a.x,top:a.y,backgroundColor:`rgb(${l})`},className:"rcp-saturation-cursor"})))});var oe=ee(({height:n=200,hideAlpha:e=!1,hideInput:o=!1,color:r,onChange:i,onChangeComplete:t,disabled:s=!1})=>g.createElement("div",{className:"rcp-root rcp"},g.createElement(B,{height:n,color:r,onChange:i,onChangeComplete:t,disabled:s}),g.createElement("div",{className:"rcp-body"},g.createElement("section",{className:"rcp-section"},g.createElement(L,{color:r,onChange:i,onChangeComplete:t,disabled:s}),!e&&g.createElement(E,{color:r,onChange:i,onChangeComplete:t,disabled:s})),(!v(o,"hex")||!v(o,"rgb")||!v(o,"hsv"))&&g.createElement("section",{className:"rcp-section"},g.createElement($,{hideInput:o,color:r,onChange:i,disabled:s})))));import{useEffect as re,useState as te}from"react";function ne(n){let[e,o]=te(m.convert("hex",n));return re(()=>{o(m.convert("hex",n))},[n]),[e,o]}export{E as Alpha,oe as ColorPicker,m as ColorService,L as Hue,B as Saturation,ne as useColor};
